(this.webpackJsonpwics=this.webpackJsonpwics||[]).push([[0],{22:function(e,t,a){e.exports={container:"View_container__TujlW",arview:"View_arview__2zDA1",iframe:"View_iframe__TX_p5",msg:"View_msg__Sy46N",button:"View_button__3XMaO",audio:"View_audio__3sgwx"}},34:function(e,t,a){e.exports={buttons:"Recorder_buttons__XRSti",recorder:"Recorder_recorder__2I48-"}},41:function(e,t,a){e.exports={container:"Home_container__3JNw6",body:"Home_body__4CaJn",model:"Home_model__J6EhB",message:"Home_message__3wUIp"}},42:function(e,t,a){e.exports=a.p+"static/media/img.b01c2e85.png"},44:function(e,t,a){e.exports={container:"Loader_container__1gOjc"}},58:function(e,t,a){e.exports=a(90)},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){e.exports={header:"Header_header__1fnJb",title:"Header_title__26H2S"}},66:function(e,t,a){e.exports={recorder:"TextMessage_recorder__RLkRd",TextMessage:"TextMessage_TextMessage__2jQkH"}},90:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(40),o=a.n(r),s=(a(63),a(64),a(33),a(28)),i=a(3),l=a(18),u=a(11),m=a(12),d=a(14),p=a(13),b=a(41),f=a.n(b),h=(a(65),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"title"},c.a.createElement("h1",null,"brightAR")),c.a.createElement("div",{className:"instructions"},c.a.createElement("p",null,"Send visible happiness :)")))}}]),a}(n.Component)),v=a(42),g=a.n(v),x=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"model"},c.a.createElement("h4",null,"Choose an object!"),c.a.createElement("img",{src:g.a,alt:"image"}))}}]),a}(n.Component),E=(a(66),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={message:""},n}return Object(m.a)(a,[{key:"onClick",value:function(e){this.setState({message:e.target.value}),this.props.updateState("text",e.target.value)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"TextMessage"},c.a.createElement("textarea",{onChange:function(t){return e.onClick(t)},value:this.state.message}),c.a.createElement("button",{onClick:function(){return e.props.submitMessage()}},"Submit"))}}]),a}(n.Component)),_=a(48),j=(a(34),a(43)),w=a.n(j),y=a(24);var O=new w.a({bitRate:128}),k=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).start=function(){n.state.isBlocked?console.log("Permission Denied"):O.start().then((function(){n.setState({isRecording:!0})})).catch((function(e){return console.error(e)}))},n.stop=function(){O.stop().getMp3().then((function(e){var t=Object(_.a)(e,2),a=(t[0],t[1]),c=URL.createObjectURL(a);n.setState({blobURL:c,isRecording:!1});var r=y.storage().ref().child("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})));r.put(a).then((function(e){console.log("Uploaded a blob or file!")})),n.props.updateState("audio",r.fullPath)})).catch((function(e){return console.log(e)}))},n.state={isRecording:!1,blobURL:"",isBlocked:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;navigator.getUserMedia({audio:!0},(function(){console.log("Permission Granted"),e.setState({isBlocked:!1})}),(function(){console.log("Permission Denied"),e.setState({isBlocked:!0})}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"recorder"},c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{id:"start",onClick:this.start,disabled:this.state.isRecording},"Record"),c.a.createElement("button",{id:"stop",onClick:this.stop,disabled:!this.state.isRecording},"Stop")),c.a.createElement("audio",{src:this.state.blobURL,controls:"controls"}))}}]),a}(n.Component);var S=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={text:"",audio:"",entity:"d8b19562-502c-4e12-a4a3-3dc853c08211"},n}return Object(m.a)(a,[{key:"updateState",value:function(e,t){var a={};a[e]=t,this.setState(a),console.log("UPDATED STATE",this.state)}},{key:"submitMessage",value:function(){y.firestore().collection("users").doc("123").set(this.state).then((function(e){alert(function(){var e=window.location.href.split("/");return delete e[e.length-1],e.join("/")}()+"views/"+e.id)}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"message"},c.a.createElement(k,{className:"recorder",updateState:this.updateState.bind(this)}),c.a.createElement(E,{className:"TextMessage",updateState:this.updateState.bind(this),submitMessage:this.submitMessage.bind(this)}),c.a.createElement("script",{src:"https://code.responsivevoice.org/responsivevoice.js?key=B5AXjDdu"}))}}]),a}(n.Component),M=(y.initializeApp({apiKey:"AIzaSyCblFEhn6FKGMYSaBeKLWLiojJaqxRABpI",authDomain:"wics-app-8c601.firebaseapp.com",databaseURL:"https://wics-app-8c601.firebaseio.com",projectId:"wics-app-8c601",storageBucket:"wics-app-8c601.appspot.com",messagingSenderId:"1042898649667",appId:"1:1042898649667:web:59908e029a4591ec7ccaf6",measurementId:"G-5F3SMMMTJ3"}),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:f.a.container},c.a.createElement(h,null),c.a.createElement("div",{className:"body"},c.a.createElement(x,{className:"model"}),c.a.createElement(S,{className:"message"})))}}]),a}(n.Component)),N=a(22),R=a.n(N),I=a(44),C=a.n(I),B=a(45),L=a.n(B),T=function(){return c.a.createElement("div",{className:C.a.container},c.a.createElement(L.a,{type:"ball-rotate"}),";")},A=a(46),U=a.n(A),J=function(e){var t=e.entryId,a="https://console.echoAR.xyz/webar?key=".concat("calm-mud-3261","&entry=",t);return c.a.createElement("div",{className:R.a.arview},c.a.createElement("iframe",{title:"ok",className:R.a.iframe,src:a}))},D=function(e){var t=e.id,a=Object(l.i)().collection("message").doc(t),n=Object(l.j)(a);console.log(n);var r=""===n.text,o=Object(l.l)().ref(n.audio),i=Object(l.m)(o),u=r?c.a.createElement(U.a,{className:R.a.audio,url:i,playing:!0,volume:1,controls:!0,autoPlay:!0}):window.responsiveVoice.speak(n.text);return console.log(i),c.a.createElement("div",{className:R.a.msg},c.a.createElement(J,{entryId:n.entity}),u,c.a.createElement(s.b,{to:"/"},c.a.createElement("button",{className:R.a.button},"Send A Message")))},H=function(){var e=Object(i.f)().id;return console.log(e),c.a.createElement("div",{className:R.a.container},c.a.createElement(l.b,{fallback:c.a.createElement(T,null),traceId:"load-message-status"},c.a.createElement(D,{id:e})))},V={apiKey:"AIzaSyCblFEhn6FKGMYSaBeKLWLiojJaqxRABpI",authDomain:"wics-app-8c601.firebaseapp.com",databaseURL:"https://wics-app-8c601.firebaseio.com",projectId:"wics-app-8c601",storageBucket:"wics-app-8c601.appspot.com",messagingSenderId:"1042898649667",appId:"1:1042898649667:web:59908e029a4591ec7ccaf6",measurementId:"G-5F3SMMMTJ3"};var F=function(){return c.a.createElement(l.a,{firebaseConfig:V},c.a.createElement(s.a,null,c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/view/:id"},c.a.createElement(H,null)),c.a.createElement(i.a,{path:"/"},c.a.createElement(M,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[58,1,2]]]);
//# sourceMappingURL=main.2da8a106.chunk.js.map